<div class="page-title">
  <div class="title_left">
    <h3>Danh sách nhóm quyền</h3>
  </div>

  <div class="title_right">
    <div class="col-md-5 col-sm-5 col-xs-12 form-group pull-right top_search">
      <div class="input-group">
        <input type="text" class="form-control" (keyup.enter)="loadDataRole()"  [(ngModel)]="filter" name="filter" placeholder="Gõ tên quyền...">
        <span class="input-group-btn">
          <button class="btn btn-default" type="button" (click)="loadDataRole()">Tìm!</button>
        </span>
      </div>
    </div>
  </div>
</div>
<div class="clearfix"></div>
<div class="row">
  <div class="col-md-12 col-sm-12 col-xs-12">
    <div class="x_panel">
      <div class="x_title">
        <ul class="nav navbar-right panel_toolbox">
          <li>
            <button class="btn btn-success" (click)="openModal(template, null)">Add</button>
          </li>
        </ul>
        <div class="clearfix"></div>
      </div>
      <div class="x_content">

        <table class="table table-bordered">
          <thead>
            <tr>
              <th>Mã</th>
              <th>Tên</th>
              <th>Action</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let role of roles">
              <td>{{role.Name}}</td>
              <td>{{role.Description}}</td>
              <td>
                <button class="btn btn-primary" (click)="openModal(template, role)"><i class="fa fa-pencil-square-o"></i></button>
                <button class="btn btn-danger" (click)="openModalConfirm(templateDelete, role)"><i class="fa fa-trash"></i></button>
              </td>
            </tr>
          </tbody>
        </table>

        <div class="col-md-12 cold-xs-12 col-12">
          <pagination [totalItems]="totalRows" [itemsPerPage]="pageSize" [(ngModel)]="pageIndex" (pageChanged)="pageChanged($event)"></pagination>
        </div>
      </div>
    </div>
  </div>
</div>

<ng-template #template>
  <div class="modal-header">
    <h4 class="modal-title pull-left">Form Role</h4>
    <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <form [formGroup]="formRole" class="form-horizontal form-label-left" novalidate (ngSubmit)="saveChange()">
      <input type="hidden" id="Id" formControlName="Id" name="Id" class="form-control col-md-7 col-xs-12">
      <div class="form-group">
        <label class="control-label col-md-3 col-sm-3 col-xs-12">Name <span class="required">*</span>
        </label>
        <div class="col-md-6 col-sm-6 col-xs-12">
          <input type="text" id="name" formControlName="Name" class="form-control col-md-7 col-xs-12">
        </div>
        <div class="col-md-offset-3 col-md-6 col-sm-6 col-xs-12" *ngIf="isError('Name')">
          <div [hidden]="!isErrorRequired('Name')" class="alert alert-danger">
            Name is required field!
          </div>
          <div [hidden]="!isErrorMinLength('Name')" class="alert alert-danger">
            Name is least at 4 characters long!
          </div>
        </div>
      </div>
      <div class="form-group">
        <label class="control-label col-md-3 col-sm-3 col-xs-12">Description<span class="required">*</span>
        </label>
        <div class="col-md-6 col-sm-6 col-xs-12">
          <input type="text" name="description" formControlName="Description" required="required" class="form-control col-md-7 col-xs-12">
        </div>
        <div class="col-md-offset-3 col-md-6 col-sm-6 col-xs-12" *ngIf="isError('Description')">
          <div [hidden]="!isErrorRequired('Description')" class="alert alert-danger">
            Name is required field!
          </div>
        </div>
      </div>
      <div class="ln_solid"></div>
      <div class="form-group">
        <div class="col-md-6 col-sm-6 col-xs-12 col-md-offset-3">
          <button class="btn btn-primary" type="button" (click)="modalRef.hide()">Cancel</button>
          <button class="btn btn-primary" type="reset" (click)="reset()">Reset</button>
          <button type="submit" class="btn btn-success" [disabled]="!formRole.valid">Submit</button>
        </div>
      </div>
    </form>
  </div>
</ng-template>

<ng-template #templateDelete>
  <div class="modal-header">
    <h4 class="modal-title pull-left">Confirm Delete</h4>
    <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body text-center">
    <h4>Do you want delete this record?</h4>
    <div class="ln_solid"></div>
    <button type="button" class="btn btn-default" (click)="delete()">Yes</button>
    <button type="button" class="btn btn-primary" (click)="modalRef.hide()">No</button>
  </div>
</ng-template>
